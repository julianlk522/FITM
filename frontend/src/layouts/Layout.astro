---
interface Props {
	Title: string
}

const { Title: title } = Astro.props
let user = Astro.cookies.get('user')?.value
---

<!doctype html>
<html lang='en'>
	<head>
		<meta charset='UTF-8' />
		<meta name='description' content='Open Internet Treasure Map' />
		<meta name='viewport' content='width=device-width' />
		<link rel='icon' type='image/svg+xml' href='/favicon.svg' />
		<meta name='generator' content={Astro.generator} />
		<title>{title}</title>
	</head>
	<nav>
		<a href='/'>Home</a>
		<a href='/about'>About</a>
		<a href='/top'>Top</a>
		{
			user ? (
			<a href=`/map/${user}` id="user-tmap-link">{user}</a>) : (<a href='/login' id="login-link">Login</a>)
		}
	</nav>
	<body>
		<slot />
	</body>
	<footer>
		<a href='/feedback'>Feedback</a>
	</footer>

	<style is:global>
		:root {
			--text: hsl(0, 0%, 92%);
			--text-treasurey: hsl(44, 55%, 80%);
			--text-treasurey-dark: hsl(44, 25%, 60%);

			--sky: hsl(180, 33%, 82%);
			--sky-mild: hsla(180, 33%, 82%, 0.05);
		}
		html {
			font-family: system-ui, sans-serif;
			background: #13151a;
			background-size: 224px;
		}
		nav,
		footer {
			max-width: 1080px;
			margin: 0 auto;
			padding: 0.5rem 1rem;

			a,
			a:visited {
				color: var(--text);
			}
		}
		nav :is(#user-tmap-link, #login-link) {
			float: right;
		}
		main {
			margin: auto;
			padding: 0.5rem;
			width: 800px;
			max-width: calc(100% - 2rem);
			color: var(--text);
			line-height: 1.4;
		}
		h1 {
			font-size: 2rem;
			font-weight: 700;
			line-height: 1;
			text-align: center;
		}
		h1:has(+h2.subtitle) {
			margin-bottom: 0.5rem;
		}
		h1,
		h2.subtitle {
			margin-bottom: 1rem;
		}
		h2 {
			font-size: 1.5rem;
		}
		h2.subtitle {
			font-size: 1rem;
			font-weight: normal;
			text-align: center;
		}
		h2.subtitle.bg {
			background: var(--sky-mild);
			padding: 3px;
		}
		h3 {
			font-size: 1.15rem;
		}
		h2, h3, h4, h5, h6 {
			margin: 0;
		}
		p {
			margin-bottom: 0;
		}
		section {
			padding: 1rem 0;
			border-bottom: 1px solid rgba(255, 255, 255, 0.05);
		}
		a:not(:visited) {
			color: var(--text-treasurey);
		}
		a:visited {
			color: var(--text-treasurey-dark);
		}
		form {
			max-width: 100%;

			label {
				display: block;
				margin-top: 5px;
			}

			textarea {
				max-width: 100%;
			}
		}
		img {
			height: auto;
			object-fit: contain;
			max-width: 100%;
		}
		details {
			max-width: 100%;

			p {
				word-wrap: break-word;
			}
		}
		details[open] {
			summary p { 
				display: none;
			}
		}

		button.img-btn {
			padding: 3px 5px 0px;
			margin-top: 0;
			min-width: fit-content;
			background-color: transparent;
			border: none;
			cursor: pointer;
		}

		#top-cats,
		#top-contributors {
			display: flex;
			flex-direction: column;
			list-style-position: inside;
			margin: 0;
			padding: 0.5rem 1rem;

			li {
				padding-right: 1rem;
			}
		}

		#top-links {
			max-width: calc(100% - 1rem);
			margin: 0;
			margin-top: 0.5rem;
			margin-left: auto;
			padding: 0;
		}

		@media (min-width: 480px) {
			#top-cats {
				flex-wrap: wrap;
				max-height: 250px;
			}
		}

		@media (min-width: 680px) {
			main {
				padding: 2rem;
				padding-bottom: 1rem;
				max-width: calc(100% - 4rem);
			}

			#top-cats {
				margin-bottom: 0;

				li {
					padding-right: 2rem;
				}
			}
		}

	</style>
</html>
