---
import NewLinks from '../components/NewLinks.tsx'
import Layout from '../layouts/Layout.astro'

let token = Astro.cookies.get('token')?.value
let user = Astro.cookies.get('user')?.value

if (!token || !user) {
	Astro.cookies.set('redirect_to', Astro.url.pathname, {
		maxAge: 3600,
		sameSite: 'strict',
		secure: true,
	})
	return Astro.redirect('/login')
}
---

<Layout Title='Submit a New Link to OITM'>
	<main>
		<h1>Submit New Links</h1>
		<h2>Rules:</h2>
		<p>
			Anything NSFW needs to be tagged with category "NSFW" or will be
			removed.
		</p>

		<NewLinks client:load Token={token} User={user} />
	</main>
</Layout>

<style></style>
