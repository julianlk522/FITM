---
import NewLinks from '../components/Link/NewLinks.tsx'
import BaseLayout from '../layouts/BaseLayout.astro'

let token = Astro.cookies.get('token')?.value
let user = Astro.cookies.get('user')?.value

if (!token || !user) {
	Astro.cookies.set('redirect_to', Astro.url.pathname, {
		maxAge: 300,
		path: '/login',
		sameSite: 'strict',
		secure: true,
	})
	return Astro.redirect('/login')
}
---

<BaseLayout Title='Submit New Link(s)'>
	<main>
		<h1>Submit New Links(s)</h1>
		<section>
			<h2>Rules</h2>
			<p>
				Anything <a href="https://en.wikipedia.org/wiki/Not_safe_for_work">NSFW</a> must be tagged with cat <span id="example-cat" class="cat">"NSFW"</span>.
			</p>
		</section>

		<NewLinks client:load Token={token} User={user} />
	</main>
</BaseLayout>

<style>
	#example-cat {
		display: inline;
		margin: 5px;
		padding: 0 5px;
		border-radius: 2px;
		color: black;
		background-color: var(--sky);
		font-weight: bold;
	}
	a {
		font-weight: bold;
	}
</style>
