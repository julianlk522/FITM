---
import type { LinkData } from '../types'
import format_date from '../util/format_date'
interface Props {
	link: LinkData
}

const {
	ID: id,
	URL: url,
	SubmittedBy: submitted_by,
	SubmitDate: submit_date,
	Categories: categories,
	Summary: summary,
	SummaryCount: summary_count,
	LikeCount: like_count,
} = Astro.props.link

const is_summary_page = Astro.url.pathname.startsWith('/summary/')
---

<li class='link'>
	<a href={url}>
		<h2>
			{summary ? summary : url}
		</h2>
	</a>
	<p>Submitted By: {submitted_by} on {format_date(submit_date)}</p>
	<p>
		Categories: {
			categories ? (
				categories
			) : (
				<>
					<span>none - </span>
					<a href='/'>add category(ies)</a>
				</>
			)
		}
	</p>
	<button>Like ({like_count})</button>
	{
		is_summary_page ? null : (
			<a href={`/summary/${id}`}>
				View all summaries ({summary_count}) or add new
			</a>
		)
	}
</li>
<style>
	h2 {
		margin: 0;
		font-size: 1.25rem;
		transition: color 0.6s cubic-bezier(0.22, 1, 0.36, 1);
	}
	p {
		margin-top: 0.5rem;
		margin-bottom: 0;
	}
	.link {
		list-style: none;
		border: 1px solid rgba(var(--accent), 25%);
		margin: 10px 0;
	}
</style>
